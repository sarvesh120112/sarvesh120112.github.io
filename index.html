<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easiest way to Earn â‚¹1000 - Referral Program</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>ðŸ’° Get â‚¹1000 Off & Earn â‚¹1000! ðŸ’°</h1>
        <h2>Refer & Earn - Help Students Succeed in Class 10 Math!</h2>
        <form id="referral-form">
            <input type="email" id="referral-email" placeholder="Enter Your Email to Get Your Referral Code" required>
            <button type="submit">Generate Referral Code</button>
        </form>
    </div>

    <!-- Firebase Modular SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js"></script>

    <script>
      // Firebase Configuration
      const firebaseConfig = {
          apiKey: "AIzaSyBeBkR6WpXalLxuJRwRq4ZXSYtSKVQ1Zjo",
          authDomain: "referral-20569.firebaseapp.com",
          databaseURL: "https://referral-20569-default-rtdb.firebaseio.com",
          projectId: "referral-20569",
          storageBucket: "referral-20569.firebasestorage.app",
          messagingSenderId: "707280237053",
          appId: "1:707280237053:web:7f3e4f005221685079e994",
          measurementId: "G-C4CKH4EHJB"
      };

      // Initialize Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore(app);

      // Form submission
      document.getElementById('referral-form').addEventListener('submit', async function(event) {
          event.preventDefault();
          const email = document.getElementById('referral-email').value;
          
          // Validate Email
          if (!email || !/\S+@\S+\.\S+/.test(email)) {
              alert("Please enter a valid email.");
              return;
          }

          try {
              // Add to Firestore
              await db.collection("referrals").add({
                  email: email,
                  timestamp: firebase.firestore.FieldValue.serverTimestamp()
              });

              alert("You will receive an email with your referral code and payment link soon!");
          } catch (error) {
              console.error("Error saving referral: ", error);
          }
      });
    </script>
</body>
</html>
